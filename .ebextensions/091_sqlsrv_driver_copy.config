commands:
    01_install_php_devel:
        command: |
            if [ ! -f /.installed_php_devel ]; then
                sudo yum install -y php-devel gcc gcc-c++ make
                sudo touch /.installed_php_devel
            fi
        test: test ! -f /.installed_php_devel
        ignoreErrors: true

    02_install_sqlsrv_pecl:
        command: |
            if [ ! -f /.installed_sqlsrv_pecl ]; then
                sudo pecl install sqlsrv pdo_sqlsrv
                sudo touch /.installed_sqlsrv_pecl
            fi
        test: test ! -f /.installed_sqlsrv_pecl
        ignoreErrors: true

container_commands:
    01_verify_drivers:
        command: |
            echo "Checking for SQL Server drivers..."
            php -m | grep -i sqlsrv || echo "SQL Server extensions not loaded"
            echo "PHP version:"
            php -v
        ignoreErrors: true
