option_settings:
  aws:elasticbeanstalk:application:environment:
    APP_ENV: production
    APP_DEBUG: false
    LOG_CHANNEL: errorlog
    SESSION_DRIVER: database
    CACHE_STORE: database
    QUEUE_CONNECTION: database
    UPLOAD_DISK: local
    FILESYSTEM_DISK: local

container_commands:
  10_clear_caches:
    command: |
      php artisan config:clear
      php artisan cache:clear
      php artisan view:clear
      php artisan route:clear
    cwd: "/var/app/staging"
    ignoreErrors: true
  11_optimize_app:
    command: |
      php artisan config:cache
      php artisan route:cache
      php artisan view:cache
    cwd: "/var/app/staging"
  12_queue_restart:
    command: "php artisan queue:restart"
    cwd: "/var/app/staging"
    ignoreErrors: true